
import streamlit as st
from transformers import pipeline

# ูุญููู ุงููููุฐุฌ ูู Hugging Face
@st.cache_resource
def load_model():
    model_name = "gpt2"  # ูููู ุชุบููุฑ ุฅูู ูููุฐุฌ ูุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ ุฅุฐุง ุชูุงููู
    gen = pipeline("text-generation", model=model_name, tokenizer=model_name)
    return gen

generator = load_model()

st.set_page_config(page_title="ุณุชุงูู ุจูุช - ููุง", page_icon="๐")
st.title("๐ ุณุชุงูู ุจูุช - ููุง")
st.markdown("ุงุญุตูู ุนูู ุชูุตูุงุช ูุจุณู ุงููุซุงูู ุจุฏูู ุงุณุชุฎุฏุงู ููุชุงุญ OpenAI")

ุฃููุงู_ุงูุจุดุฑุฉ = ['ูุงุชุญ', 'ููุญู', 'ุญูุทู', 'ุบุงูู']
ุงูุฃุทูุงู = ['ุฃูู ูู 150 ุณู', '150 - 165 ุณู', 'ุฃุทูู ูู 165 ุณู']
ุฃุดูุงู_ุงูุฌุณู = ['ูุณุชุทูู', 'ููุซุฑู', 'ุชูุงุญุฉ', 'ุณุงุนุฉ ุฑูููุฉ']
ุงูููุงุณุจุงุช = ['ุณูุฑุฉ', 'ุฒูุงุฌ ูุณุงุก', 'ูุดูุงุฑ ููุงุฑู', 'ุงูุนูู']

ููู_ุงูุจุดุฑุฉ = st.selectbox("๐ธ ููู ุงูุจุดุฑุฉ:", ุฃููุงู_ุงูุจุดุฑุฉ)
ุงูุทูู = st.selectbox("๐ ุงูุทูู:", ุงูุฃุทูุงู)
ุดูู_ุงูุฌุณู = st.selectbox("๐ ุดูู ุงูุฌุณู:", ุฃุดูุงู_ุงูุฌุณู)
ุงูููุงุณุจุฉ = st.selectbox("๐ ููุน ุงูููุงุณุจุฉ:", ุงูููุงุณุจุงุช)

if st.button("ุงุญุตูู ุนูู ุชูุตูุชู"):
    with st.spinner("ุฌุงุฑู ุงูุชูููุฑ... ๐ญ"):
        prompt = (
            f"ููู ุงูุจุดุฑุฉ: {ููู_ุงูุจุดุฑุฉ}. ุงูุทูู: {ุงูุทูู}. ุดูู ุงูุฌุณู: {ุดูู_ุงูุฌุณู}. ุงูููุงุณุจุฉ: {ุงูููุงุณุจุฉ}. "
            "ุงูุชุฑุญ ูู ูุจุณ ููุงุณุจุ ุงูุฃููุงู ุงูููุงุณุจุฉุ ุชุณุฑูุญุฉ ุดุนุฑุ ูุฃูุณุณูุงุฑุงุช ุจุฃุณููุจ ุฃูุซูู."
        )
        try:
            result = generator(prompt, max_length=200)
            reply = result[0]['generated_text']
            st.success("โจ ุชูุตูุชู ุงูุฃูููุฉ:")
            st.write(reply)
        except Exception as e:
            st.error("ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชูููุฏ ุงูุชูุตูุฉ.")
            st.write(str(e))
